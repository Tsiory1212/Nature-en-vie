{% extends 'base_admin.html.twig' %}

{% block title %}
	Les abonnements
{% endblock %}


{% block body %}
    <div class="container mt-5">
		<a href="{{path('admin_subscription_create')}}" class="btn btn-primary mt-4">Créer un abonnement</a>
		<a href="{{path('admin_subscriber_list')}}" class="btn btn-secondary mt-4">Abonnés</a>

		<div class="container mt-5">
			<div class="container">
				{# {{form_start(form)}}
				<div class="row align-items-end">
					<div class="col">
						{{form_row(form.nom)}}
					</div>
					<div class="col">
						<button class="btn btn-primary">Recherche</button>
					</div>
				{{form_end(form)}}
			</div> #}

			{% for label, messages in app.flashes %}
				<div class="alert alert-{{label}} text-center">
					{% for message in messages %}
						{{message | raw}}
					{% endfor %}
				</div>
			{% endfor %}


			<table class="table table-striped table-hover">
				<thead>
					<tr class="text-center">
						<th scope="col">Nom</th>
						<th scope="col">Description</th>
						<th scope="col">Prix</th>
						<th scope="col">Durré en mois</th>
						<th scope="col">Id-Subscription (Paypal)</th>
						<th scope="col">Id-Product (Paypal)</th>
						<th scope="col">Abonnés</th>
					</tr>
				</thead>
				<tbody>
					{% for subscription in subscriptions %}
						<tr>
						{# <pre>
							{{ dump(subscription) }}
						</pre> #}
					
							 <td>{{subscription.nameSubscriptionPlan}}</td>
							<td>{{subscription.descriptionSubscriptionPlan}}</td>
							<td>{{subscription.priceSubscription}} €</td>
							<td>{{subscription.durationMonthSubscription}}</td>
							<td>{{subscription.idSubscriptionPlanPaypal}}</td>
							<td>{{subscription.idProductPlanPaypal}}</td>
							<td><a href="{{ path('admin_subscriber_plan_list', {id: subscription.id}) }}"><i class="fas fa-users"></i></a></td>

							{# <td>
								<a href="{{path('admin_product_edit', {id: subscription.id})}}" class="btn btn-secondary"> <i class="fas fa-edit"></i> </a>
								<form method="post" action="{{path('admin_product_delete', {id: subscription.id})}}" style="display: inline-block;" onsubmit="return confirm('Êtes vous vraiment sûr ?')">
									<input type="hidden" name="_method" value="DELETE">
									<input type="hidden" name="_token" value="{{ csrf_token('delete' ~ subscription.id) }}">
									<button class="btn btn-danger"><i class="fas fa-trash-alt"></i></button>
								</form>
							</td> #}
						</tr>
					{% endfor %}

				</tbody>
			</table>

			{# <div class="pagination d-flex justify-content-center">
				{{ knp_pagination_render(subscriptions)}}
			</div> #}
		</div>
    </div>
{% endblock %}
